import{a as I}from"./chunk-WWOP5CWK.js";import"./chunk-N33IVAED.js";import{a as b,b as k}from"./chunk-STDFH7RV.js";import{d as S}from"./chunk-UVENSJEX.js";import{Aa as u,Ha as _,La as d,Oc as O,Pc as E,S as f,Xa as l,Xb as P,Ya as r,Yb as y,Za as n,_a as M,ac as w,cb as C,da as v,ea as h,eb as x,fb as p,j as g,tb as s,wa as c}from"./chunk-UFRGRQRP.js";function T(t,i){if(t&1){let m=C();r(0,"app-movie-card",10),x("trailerClicked",function(o){v(m);let a=p(2);return h(a.onTrailerClick(o))}),n()}if(t&2){let m=i.$implicit;l("movie",m)("showOverview",!0)}}function F(t,i){if(t&1&&(r(0,"div",8),d(1,T,1,2,"app-movie-card",9),n()),t&2){let m=p();c(),l("ngForOf",m.movies)("ngForTrackBy",m.trackByMovieId)}}function z(t,i){t&1&&(r(0,"div",11),M(1,"mat-spinner",12),r(2,"p"),s(3,"Cargando m\xE1s pel\xEDculas..."),n()())}function D(t,i){t&1&&(r(0,"div",13)(1,"mat-icon"),s(2,"movie_filter"),n(),r(3,"h3"),s(4,"No se encontraron pr\xF3ximos estrenos"),n(),r(5,"p"),s(6,"\xA1Vuelve m\xE1s tarde para ver nuevos lanzamientos!"),n()())}var A=(()=>{let i=class i{constructor(e){this.tmdbService=e,this.movies=[],this.loading=!1,this.currentPage=1,this.hasMorePages=!0,this.destroy$=new g}ngOnInit(){this.loadMovies(),this.setupInfiniteScroll()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadMovies(){this.loading||!this.hasMorePages||(this.loading=!0,this.tmdbService.getUpcomingMovies(this.currentPage).pipe(f(this.destroy$)).subscribe({next:e=>{this.movies=[...this.movies,...e.results],this.currentPage++,this.hasMorePages=this.currentPage<=e.total_pages,this.loading=!1},error:e=>{console.error("Error cargando pel\xEDculas:",e),this.loading=!1}}))}setupInfiniteScroll(){let e=()=>{let o=window.innerHeight+window.scrollY,a=document.body.offsetHeight-1e3;o>=a&&!this.loading&&this.hasMorePages&&this.loadMovies()};window.addEventListener("scroll",e),this.destroy$.subscribe(()=>{window.removeEventListener("scroll",e)})}onTrailerClick(e){console.log("Ver trailer de la pel\xEDcula:",e)}trackByMovieId(e,o){return o.id}};i.\u0275fac=function(o){return new(o||i)(u(S))},i.\u0275cmp=_({type:i,selectors:[["app-upcoming-releases"]],decls:12,vars:3,consts:[[1,"upcoming-container"],[1,"container"],[1,"page-header"],[1,"page-title"],[1,"page-description"],["class","movies-grid",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"movies-grid"],[3,"movie","showOverview","trailerClicked",4,"ngFor","ngForOf","ngForTrackBy"],[3,"trailerClicked","movie","showOverview"],[1,"loading-container"],["diameter","50"],[1,"empty-state"]],template:function(o,a){o&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"mat-icon"),s(5,"upcoming"),n(),s(6," Pr\xF3ximos Estrenos "),n(),r(7,"p",4),s(8," Descubre las pel\xEDculas m\xE1s esperadas que llegar\xE1n pronto a los cines "),n()(),d(9,F,2,2,"div",5)(10,z,4,0,"div",6)(11,D,7,0,"div",7),n()()),o&2&&(c(9),l("ngIf",a.movies.length>0),c(),l("ngIf",a.loading),c(),l("ngIf",!a.loading&&a.movies.length===0))},dependencies:[w,P,y,k,b,E,O,I],styles:[".upcoming-container[_ngcontent-%COMP%]{min-height:100vh;padding:2rem 0}.page-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;font-size:3rem;font-weight:600;margin-bottom:1rem;color:#fff}.page-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#e50914;font-size:3rem;width:3rem;height:3rem}.page-description[_ngcontent-%COMP%]{font-size:1.2rem;color:#ccc;max-width:600px;margin:0 auto}.movies-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:2rem;margin-bottom:3rem}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;padding:2rem;color:#ccc}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:#ccc}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;color:#e50914;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;color:#fff}@media (max-width: 768px){.page-title[_ngcontent-%COMP%]{font-size:2rem;flex-direction:column;gap:1rem}.page-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2.5rem;width:2.5rem;height:2.5rem}.movies-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1rem}}@media (max-width: 480px){.movies-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}}"]});let t=i;return t})();export{A as UpcomingReleasesComponent};
